var newsaveinfo,neweditstat;function editmecomment(n,a,t){"Edit"==$(n).text()?($(".editmecancel").click(),$(".cancelmegid").click(),$(n).css("pointer-events","none"),$(n).text("Loading..."),$(".edit.rev").css("left","-9%"),$.ajax({type:"POST",url:"https://www.novelupdates.com/wp-admin/admin-ajax.php",data:{action:"nd_getcomment",comid:t},success:function(e){e=e.slice(0,-1);var i=$.trim(e),s=$("#stat"+t).html();newsaveinfo=$("#"+a).html(),neweditstat=$("#stat"+t).html();var l=i.replace(new RegExp("\n","g"),"<br>");l=replace_space(l),$("#stat"+t).replaceWith('<input type="text" id="stat'+t+'" class="frevstat" name="fname" value="'+s+'" style="height: 25px; padding: 2px; border: 1px solid #A7A7A7; width: 100px; border-radius: 0px;">'),$($(n)).parent().replaceWith('<div class="edit rev save" style="left: -85px;">[<span class="editme" onclick="saveeditcomment(this,\''+a+"','"+t+'\')">Save</span>] [<span class="editmecancel" onclick="editmecomment(this,\''+a+"','"+t+"')\">Cancel</span>]</div>"),tinyMCE.get("edit_mycontent").setContent(l),$(".tinymce_content").show(),$("#"+a).hide()}})):($(".tinymce_content").hide(),$(".editmsg").hide(),$($(n)).parent().replaceWith('<div class="edit rev">[<span class="editme" onclick="editmecomment(this,\''+a+"','"+t+"')\">Edit</span>]</div>"),$("#"+a).replaceWith('<div id="'+a+'">'+newsaveinfo+"</div>"),$("#stat"+t).replaceWith('<span id="stat'+t+'">'+neweditstat+"</span>"))}function replace_space(e){return e=(e=(e=e.replace(new RegExp("<br><br><br>","g"),"<br><br>")).replace(new RegExp("<br><br><br>","g"),"<br><br>")).replace(new RegExp("<br><br><br>","g"),"<br><br>")}function TinyMCE_replace(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<br style="line-height: 40px;">/g,"\n")).replace(new RegExp('<div class="sp-wrap sp-wrap-yellow">\n<div class="sp-head unfolded" title="Collapse">\nSpoiler\n</div>\n<div class="sp-body" style="display: block; overflow: hidden;">\n',"g"),"[spoiler]")).replace(new RegExp('<div class="sp-wrap sp-wrap-yellow">\n<div class="sp-head" title="Expand">\nSpoiler\n</div>\n<div class="sp-body folded" style="display: none; overflow: hidden;">\n',"g"),"[spoiler]")).replace(new RegExp('<div class="sp-wrap sp-wrap-yellow">\n<div class="sp-head unfolded" title="Collapse">\nSpoiler\n</div>\n<div style="display: block;" class="sp-body">\n',"g"),"[spoiler]")).replace(new RegExp('<div class="sp-wrap sp-wrap-yellow">\n<div class="sp-head" title="Expand">\nSpoiler\n</div>\n<div style="display: none;" class="sp-body folded">\n',"g"),"[spoiler]")).replace(new RegExp('<div class="sp-wrap sp-wrap-yellow">\n<div title="Collapse" class="sp-head unfolded">\nSpoiler\n</div>\n<div class="sp-body" style="overflow: hidden; display: block;">\n',"g"),"[spoiler]")).replace(new RegExp('<div class="sp-wrap sp-wrap-yellow">\n<div title="Expand" class="sp-head">\nSpoiler\n</div>\n<div class="sp-body folded" style="display: none;">\n',"g"),"[spoiler]")).replace(new RegExp('<div class="sp-wrap sp-wrap-yellow">\n<div class="sp-head" title="Expand">\nSpoiler\n</div>\n<div class="sp-body folded" style="display: none;">\n',"g"),"[spoiler]")).replace(new RegExp('\n<div class="spdiv">\\[collapse\\]</div>\n</div>\n</div>\n',"g"),"[/spoiler]")).replace(new RegExp('\n<div class="spdiv">\\[collapse\\]</div>\n</div>\n</div>',"g"),"[/spoiler]")).replace(new RegExp('<div class="spdiv">\\[collapse\\]</div>\n</div>\n</div>',"g"),"[/spoiler]")).replace(new RegExp("\n\n\n","g"),"\n\n")).replace(new RegExp('<div class="sp-wrap sp-wrap-yellow">\n<div class="sp-head unfolded" title="Collapse">\nSpoiler\n</div>\n<div class="sp-body" style="display: block;">',"g"),"[spoiler]")).replace(new RegExp('<div class="sp-wrap sp-wrap-yellow">\n<div class="sp-head unfolded" title="Collapse">\nSpoiler\n</div>\n<div class="sp-body" style="overflow: hidden;">\n',"g"),"[spoiler]")).replace(new RegExp('<div class="sp-wrap sp-wrap-yellow">\n<div class="sp-head unfolded" title="Collapse">\nSpoiler\n</div>\n<div class="sp-body" style="overflow: hidden;">',"g"),"[spoiler]")).replace(new RegExp('<div class="sp-wrap sp-wrap-yellow">\n<div class="sp-head unfolded" title="Collapse">\nSpoiler\n</div>\n<div class="sp-body">\n',"g"),"[spoiler]")).replace(/(<p>)/g,"")).replace(/(<\/p>)/g,"<br><br>")).replace(new RegExp("\\[spoiler\\] \n<br><br>","g"),"[spoiler]<br><br>")).replace(new RegExp("<br>\\[spoiler\\]","g"),"[spoiler]")).replace(new RegExp("<br><br>\\[\\/spoiler\\]","g"),"[/spoiler]<br><br>")).replace(new RegExp("\\[spoiler\\]\n<br><br>","g"),"[spoiler]<br>")).replace(new RegExp("<br><br><br><br>","g"),"<br><br>")).replace(new RegExp("<br><br><br>","g"),"<br><br>")}function saveeditcomment(i,s,l){$(i).addClass("disabled"),$(".editmecancel").addClass("disabled");var e=tinyMCE.get("edit_mycontent").getContent(),n=$("#mypostid").attr("value"),a=(l=l,$("#stat"+l).val());$.ajax({type:"POST",url:"https://www.novelupdates.com/wp-admin/admin-ajax.php",data:{action:"nd_editinfo",editedinfo:e,mypostid:n,comid:l,editid:s,editstat:a},success:function(e){e=e.slice(0,-1),$(".tinymce_content").hide(),$(".editmsg").hide(),$("#"+s).replaceWith('<div id="'+s+'">'+e+"</div>"),$("#stat"+l).replaceWith('<span id="stat'+l+'">'+a+"</span>"),$($(i)).parent().replaceWith('<div class="edit rev">[<span class="editme" onclick="editmecomment(this,\''+s+"','"+l+"')\">Edit</span>]</div>")}})}function showtext(e){$(e).parent().find("span").show(),$(e).parent().find(".dots").hide(),$(e).hide()}function hidetext(e){$(e).parent().parent().find("span").hide(),$(e).parent().parent().find(".dots").show(),$(e).parent().parent().find("span.morelink").show()}function up_helpful(i,e){if(void 0===e)var s=$("#mypostid").attr("value");else s=e;var l=$(".rev_help."+i).text(),n="",a=$(".liked_"+i).text();n="Like"==l?"1":"0",$.ajax({type:"POST",url:"https://www.novelupdates.com/wp-admin/admin-ajax.php",data:{action:"nd_helpful",mycomment_id:i,mypostid:s,strLiked:n},success:function(e){e=e.slice(0,-1),"Like"==l?($(".rev_help."+i).text("Liked"),$(".rev_help."+i).addClass("liked"),$(".rev_help."+i).attr("title","Unlike this review"),$(".rev_help."+i).hide().fadeIn("slow"),a=Number(a)+1):($(".rev_help."+i).text("Like"),$(".rev_help."+i).removeClass("liked"),$(".rev_help."+i).attr("title","Like this review"),$(".rev_help."+i).hide().fadeIn("slow"),a=Number(a)-1),$(".liked_"+i).text(a)}})}function changesort(e,i){createCookie("sort_rev",e,60),window.location=i}function createCookie(e,i,s){if(s){var l=new Date;l.setTime(l.getTime()+24*s*60*60*1e3);var n="; expires="+l.toGMTString()}else n="";document.cookie=e+"="+i+n+"; path=/"}function readCookie(e){for(var i=e+"=",s=document.cookie.split(";"),l=0;l<s.length;l++){for(var n=s[l];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(i))return n.substring(i.length,n.length)}return null}function eraseCookie(e){createCookie(e,"",-1)}function rptcom(e,i){var s=$(".revname"+e).text();if(void 0===i)var l=$("#mypostid").attr("value");else l=i;$.ajax({type:"POST",url:"https://www.novelupdates.com/wp-admin/admin-ajax.php",data:{action:"nd_rptcom",reportid:e,mypostid:l,rname:s,reporttext:$("textarea#nu_reportcom").val()},success:function(e){$(".my_popupreport_close").click()}})}